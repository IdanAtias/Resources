Object subclass: #Security	instanceVariableNames: 'students vehicles authorizationPolicy gatePolicy'	classVariableNames: ''	poolDictionaries: ''	category: 'OOP1'!!Security methodsFor: 'initialize-release' stamp: 'LBA 4/1/2016 00:41'!initialize	"students holds 'students' as keys and 'vehicles' as values"	"vehicles hold's all the vehicles who have access to the Technion"	"authorizationPolicy is by default a block who returns true for any student%vehicle combination"	students := Dictionary new.	vehicles := Set new.	authorizationPolicy := [:student :vehicle | true].	gatePolicy := [:vehicle | self authorizationExists: vehicle].		! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 00:33'!addPermissionToGatePolicy: aBlock	! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 00:40'!authorizationExists: aVehicle	^[vehicles includes: aVehicle.]	! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 00:02'!authorizationPolicy	^authorizationPolicy! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 00:03'!authorizationPolicy: aBlock	authorizationPolicy := aBlock.! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 01:02'!authorizationRequest: studentId forVehicle: aVehicle	(students includesKey: studentId ) ifTrue: [] ! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 00:04'!gatePolicy	^gatePolicy! !!Security methodsFor: 'policy' stamp: 'LBA 4/1/2016 00:43'!resetGatePolicy	gatePolicy := [:vehicle | self authorizationExists: vehicle].! !Object subclass: #Student	instanceVariableNames: 'name id isDormsResident'	classVariableNames: ''	poolDictionaries: ''	category: 'OOP1'!!Student methodsFor: 'id' stamp: 'IA 3/29/2016 19:25'!id	^id! !!Student methodsFor: 'id' stamp: 'IA 3/29/2016 19:26'!id: aString	id := aString! !!Student methodsFor: 'isDormsResident' stamp: 'IA 3/29/2016 19:27'!isDormsResident	^isDormsResident! !!Student methodsFor: 'isDormsResident' stamp: 'IA 3/29/2016 19:26'!isDormsResident: aBoolean	isDormsResident := aBoolean! !!Student methodsFor: 'comparing' stamp: 'IA 4/1/2016 12:37'!= other	^(other id = self id)! !!Student methodsFor: 'comparing' stamp: 'IA 4/1/2016 12:37'!hash	^(id hash)! !!Student methodsFor: 'name' stamp: 'IA 3/29/2016 19:23'!name	^name! !!Student methodsFor: 'name' stamp: 'IA 3/29/2016 19:26'!name: aString	name := aString! !!Student methodsFor: 'initialize-release' stamp: 'IA 3/29/2016 19:15'!initialize"initializing student class:"	name := ''.	id :=  ''.	isDormsResident := false.! !Object subclass: #Vehicle	instanceVariableNames: 'licenseNumber manufacturer color stickers'	classVariableNames: ''	poolDictionaries: ''	category: 'OOP1'!!Vehicle methodsFor: 'getters' stamp: 'LBA 3/30/2016 21:18'!color	^color! !!Vehicle methodsFor: 'getters' stamp: 'LBA 3/30/2016 21:21'!getStickers	^stickers! !!Vehicle methodsFor: 'getters' stamp: 'LBA 3/30/2016 21:17'!licenseNumber	^licenseNumber! !!Vehicle methodsFor: 'getters' stamp: 'LBA 3/30/2016 21:18'!manufacturer	^manufacturer	! !!Vehicle methodsFor: 'comparing' stamp: 'LBA 3/31/2016 21:38'!= other	(((licenseNumber == other licenseNumber) and: (manufacturer == other manufacturer)) and: (color == other color)) 		ifTrue: [^true] ifFalse: [^false].		 ! !!Vehicle methodsFor: 'hash' stamp: 'LBA 3/31/2016 23:36'!hash	| hcode_license hcode_manufacturer hcode_color res |	hcode_license := licenseNumber hash.	hcode_manufacturer := manufacturer hash.	hcode_color := color hash.	res :=  ( hcode_license bitXor: hcode_manufacturer ) bitAnd: hcode_color.	^res! !!Vehicle methodsFor: 'stickers-handler' stamp: 'LBA 3/30/2016 21:30'!addSticker: aString	stickers add: aString.! !!Vehicle methodsFor: 'stickers-handler' stamp: 'LBA 3/30/2016 21:32'!removeSticker: aString	stickers remove: aString ifAbsent: [].! !!Vehicle methodsFor: 'setters' stamp: 'LBA 3/30/2016 21:24'!color: aString	color := aString.! !!Vehicle methodsFor: 'setters' stamp: 'LBA 3/30/2016 21:22'!licenseNumber: aString	licenseNumber := aString.! !!Vehicle methodsFor: 'setters' stamp: 'LBA 3/30/2016 21:24'!manufacturer: aString	manufacturer := aString.! !!Vehicle methodsFor: 'initialize-release' stamp: 'LBA 3/30/2016 21:15'!initialize	licenseNumber := ''.	manufacturer := ''.	color := ''.	stickers := Set new.! !